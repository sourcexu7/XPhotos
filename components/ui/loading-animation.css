/**
 * 加载动效样式
 * 基于 Uiverse.io by mobinkakei 优化
 * 
 * 特性：
 * - 响应式设计，自动适配手机端
 * - 硬件加速优化，流畅动画
 * - 可自定义颜色变量
 * - 遮罩层防止内容干扰
 */

/* 图片加载动效容器（内联版本） */
.image-loading-animation-container {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 10;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: none;
}

/* 图片加载动效 - 旋转圆点加载器（From Uiverse.io by david-mohseni） */
.image-loader {
  position: relative;
  width: 54px;
  height: 54px;
  border-radius: 10px;
}

.image-loader div {
  width: 8%;
  height: 24%;
  background: var(--image-loader-color, rgb(128, 128, 128));
  position: absolute;
  left: 50%;
  top: 30%;
  opacity: 0;
  border-radius: 50px;
  box-shadow: 0 0 3px rgba(0, 0, 0, 0.2);
  animation: fade458 1s linear infinite;
  /* 硬件加速优化 */
  transform: translateZ(0);
  will-change: opacity;
}

@keyframes fade458 {
  from {
    opacity: 1;
  }
  to {
    opacity: 0.25;
  }
}

.image-loader .bar1 {
  transform: rotate(0deg) translate(0, -130%);
  animation-delay: 0s;
}

.image-loader .bar2 {
  transform: rotate(30deg) translate(0, -130%);
  animation-delay: -1.1s;
}

.image-loader .bar3 {
  transform: rotate(60deg) translate(0, -130%);
  animation-delay: -1s;
}

.image-loader .bar4 {
  transform: rotate(90deg) translate(0, -130%);
  animation-delay: -0.9s;
}

.image-loader .bar5 {
  transform: rotate(120deg) translate(0, -130%);
  animation-delay: -0.8s;
}

.image-loader .bar6 {
  transform: rotate(150deg) translate(0, -130%);
  animation-delay: -0.7s;
}

.image-loader .bar7 {
  transform: rotate(180deg) translate(0, -130%);
  animation-delay: -0.6s;
}

.image-loader .bar8 {
  transform: rotate(210deg) translate(0, -130%);
  animation-delay: -0.5s;
}

.image-loader .bar9 {
  transform: rotate(240deg) translate(0, -130%);
  animation-delay: -0.4s;
}

.image-loader .bar10 {
  transform: rotate(270deg) translate(0, -130%);
  animation-delay: -0.3s;
}

.image-loader .bar11 {
  transform: rotate(300deg) translate(0, -130%);
  animation-delay: -0.2s;
}

.image-loader .bar12 {
  transform: rotate(330deg) translate(0, -130%);
  animation-delay: -0.1s;
}

/* 减少动画（尊重用户偏好） */
@media (prefers-reduced-motion: reduce) {
  .image-loader div {
    animation: none;
    opacity: 0.5;
  }
}

/* 遮罩层容器 */
.loading-animation-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  width: 100%;
  height: 100%;
  background-color: var(--loading-bg-color, rgba(0, 0, 0, 0.5));
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  /* 硬件加速 */
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
  will-change: opacity;
  /* 防止滚动穿透 */
  overflow: hidden;
  /* 兼容性优化 */
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}

/* 动效容器 */
.loading-animation-wrapper {
  width: 200px;
  height: 60px;
  position: relative;
  z-index: 1;
  /* 响应式缩放 - 手机端自适应 */
  transform: scale(1);
  transform-origin: center;
  /* 硬件加速 */
  transform: translateZ(0) scale(1);
  -webkit-transform: translateZ(0) scale(1);
  will-change: transform;
}

/* 手机端适配 */
@media screen and (max-width: 480px) {
  .loading-animation-wrapper {
    /* 小屏手机缩小 */
    transform: scale(0.8);
    -webkit-transform: translateZ(0) scale(0.8);
  }
}

@media screen and (max-width: 360px) {
  .loading-animation-wrapper {
    /* 超小屏进一步缩小 */
    transform: scale(0.7);
    -webkit-transform: translateZ(0) scale(0.7);
  }
}

/* 全面屏适配 */
@media screen and (min-width: 481px) and (max-width: 768px) {
  .loading-animation-wrapper {
    transform: scale(0.9);
    -webkit-transform: translateZ(0) scale(0.9);
  }
}

/* 圆圈元素 */
.loading-circle {
  width: 20px;
  height: 20px;
  position: absolute;
  border-radius: 50%;
  background-color: var(--loading-circle-color, #fff);
  left: 15%;
  transform-origin: 50%;
  /* 硬件加速 */
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
  will-change: transform, top, height;
  /* 动画 */
  animation: circle7124 0.5s alternate infinite ease;
  -webkit-animation: circle7124 0.5s alternate infinite ease;
}

/* 第二个圆圈 */
.loading-circle:nth-child(2) {
  left: 45%;
  animation-delay: 0.2s;
  -webkit-animation-delay: 0.2s;
}

/* 第三个圆圈 */
.loading-circle:nth-child(3) {
  left: auto;
  right: 15%;
  animation-delay: 0.3s;
  -webkit-animation-delay: 0.3s;
}

/* 圆圈动画 */
@keyframes circle7124 {
  0% {
    top: 60px;
    height: 5px;
    border-radius: 50px 50px 25px 25px;
    transform: scaleX(1.7) translateZ(0);
  }
  40% {
    height: 20px;
    border-radius: 50%;
    transform: scaleX(1) translateZ(0);
  }
  100% {
    top: 0%;
    transform: translateZ(0);
  }
}

/* WebKit 前缀动画（兼容 Safari） */
@-webkit-keyframes circle7124 {
  0% {
    top: 60px;
    height: 5px;
    border-radius: 50px 50px 25px 25px;
    -webkit-transform: scaleX(1.7) translateZ(0);
  }
  40% {
    height: 20px;
    border-radius: 50%;
    -webkit-transform: scaleX(1) translateZ(0);
  }
  100% {
    top: 0%;
    -webkit-transform: translateZ(0);
  }
}

/* 阴影元素 */
.loading-shadow {
  width: 20px;
  height: 4px;
  border-radius: 50%;
  background-color: var(--loading-shadow-color, rgba(0, 0, 0, 0.9));
  position: absolute;
  top: 62px;
  transform-origin: 50%;
  z-index: -1;
  left: 15%;
  filter: blur(1px);
  -webkit-filter: blur(1px);
  /* 硬件加速 */
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
  will-change: transform, opacity;
  /* 动画 */
  animation: shadow046 0.5s alternate infinite ease;
  -webkit-animation: shadow046 0.5s alternate infinite ease;
}

/* 第二个阴影 */
.loading-shadow:nth-child(4) {
  left: 45%;
  animation-delay: 0.2s;
  -webkit-animation-delay: 0.2s;
}

/* 第三个阴影 */
.loading-shadow:nth-child(5) {
  left: auto;
  right: 15%;
  animation-delay: 0.3s;
  -webkit-animation-delay: 0.3s;
}

/* 阴影动画 */
@keyframes shadow046 {
  0% {
    transform: scaleX(1.5) translateZ(0);
  }
  40% {
    transform: scaleX(1) translateZ(0);
    opacity: 0.7;
  }
  100% {
    transform: scaleX(0.2) translateZ(0);
    opacity: 0.4;
  }
}

/* WebKit 前缀动画（兼容 Safari） */
@-webkit-keyframes shadow046 {
  0% {
    -webkit-transform: scaleX(1.5) translateZ(0);
  }
  40% {
    -webkit-transform: scaleX(1) translateZ(0);
    opacity: 0.7;
  }
  100% {
    -webkit-transform: scaleX(0.2) translateZ(0);
    opacity: 0.4;
  }
}

/* 减少动画（尊重用户偏好） */
@media (prefers-reduced-motion: reduce) {
  .loading-circle,
  .loading-shadow {
    animation: none;
    -webkit-animation: none;
  }
  
  .loading-circle {
    top: 0%;
    height: 20px;
    border-radius: 50%;
    transform: scaleX(1) translateZ(0);
  }
  
  .loading-shadow {
    opacity: 0.7;
    transform: scaleX(1) translateZ(0);
  }
}

